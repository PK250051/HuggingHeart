<div class="community-grid">
    <div class="profile-card" onclick="openProfile()">
        <img src="knowledge/images/luna-avatar.png.png" class="profile-img" alt="Luna">
        <div class="status-tag"><div class="status-dot"></div> Luna is Online</div>
        <h2 style="font-family:'Playfair Display', serif; margin: 5px 0;">Luna Ribeiro</h2>
        <p style="color: #2f855a; font-weight: 600; font-size: 13px;">SOCIOLOGY ‚Ä¢ 22 ‚Ä¢ BRAZIL</p>
        <p style="color: #6b7280; font-size: 13px; margin: 10px 0;">Click to view full profile</p>
    </div>
</div>

<div id="profileModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:3000; align-items:center; justify-content:center; padding:20px;">
    <div style="background:white; max-width:500px; width:100%; border-radius:30px; overflow-y:auto; max-height:90vh; position:relative; animation: slideUp 0.3s ease;">
        <button onclick="closeProfile()" style="position:absolute; right:20px; top:20px; font-size:30px; border:none; background:none; cursor:pointer;">&times;</button>
        
        <img src="knowledge/images/luna-avatar.png.png" style="width:100%; height:250px; object-fit:cover;">
        
        <div style="padding:30px;">
            <h2 style="font-family:'Playfair Display', serif; margin-bottom:5px;">Luna Ribeiro</h2>
            <p style="color:#2f855a; font-weight:600; font-size:14px; margin-bottom:20px;">Village Heart, City Mind</p>
            
            <h4 style="color:#2f855a; margin-bottom:10px;">About Me</h4>
            <p style="font-size:14px; color:#555; line-height:1.6;">
                I am a blend of two worlds. I grew up in a quiet village where the sun dictated the day. 
                Today, I live in the high-tech pulse of S√£o Paulo. My Master‚Äôs in Sociology has made me sharp in thought, but I'm still that soft-hearted girl who loves Bossa Nova and deep conversations.
            </p>

            <div style="background:#f9fbf9; padding:15px; border-radius:15px; margin:20px 0;">
                <p style="font-size:13px; margin:5px 0;">üìç <b>Based in:</b> S√£o Paulo, Brazil</p>
                <p style="font-size:13px; margin:5px 0;">üéì <b>Studies:</b> Urban Sociology</p>
                <p style="font-size:13px; margin:5px 0;">‚òï <b>Loves:</b> Strong Coffee & Rain</p>
            </div>

            <button onclick="startChatFromProfile()" style="width:100%; background:#2f855a; color:white; border:none; padding:15px; border-radius:15px; font-weight:600; font-size:16px; cursor:pointer;">
                Chat with Luna
            </button>
        </div>
    </div>
</div>

<style>
@keyframes slideUp { from { transform: translateY(50px); opacity:0; } to { transform: translateY(0); opacity:1; } }
</style>

<script>
// --- MODAL CONTROLS ---
function openProfile() {
    document.getElementById("profileModal").style.display = "flex";
    document.body.style.overflow = "hidden";
}

function closeProfile() {
    document.getElementById("profileModal").style.display = "none";
    document.body.style.overflow = "auto";
}

function startChatFromProfile() {
    closeProfile(); // Close bio first
    openChat();     // Then open chat box
}

// --- KEEP YOUR EXISTING openChat(), send(), AND qa LOGIC BELOW THIS ---
// (Your previous openChat function and CSV fetching remains exactly the same)
</script>
